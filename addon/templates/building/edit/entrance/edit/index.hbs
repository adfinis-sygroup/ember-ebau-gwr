<div>
  {{#if this.fetchBuildingEntrance.isRunning}}
    <div class="uk-flex uk-flex-center uk-flex-middle uk-margin-large-top">
      <UkSpinner @ratio="3" />
    </div>
  {{else}}
    <ProjectForm
      @project={{this.buildingEntrance}}
      @onSubmit={{this.saveBuildingEntrance}}
      @translationBase="ember-gwr.buildingEntrance.fields"
      @errors={{this.errors}} as |Field Submit SubmitErrors|
    >
      <div class="uk-flex uk-flex-between uk-flex-top">
        <h2 class="uk-flex uk-flex-between">
          <span>
            {{#if this.buildingEntrance.isNew}}
              {{t "ember-gwr.buildingEntrance.createNewEntrance"}}
            {{else}}
              {{t
                "ember-gwr.buildingEntrance.title"
                address=this.buildingEntrance.fullAddressText
              }}
            {{/if}}
          </span>
        </h2>
        <div class="uk-flex uk-flex-column uk-flex-right">
          <div class="uk-flex-inline uk-flex-right">
            <Submit />
          </div>
          <div class="uk-margin-small-top uk-flex uk-flex-right">
            <SubmitErrors />
          </div>
        </div>
      </div>
      <Header
        @model={{this.buildingEntrance}}
        @modelId={{this.buildingEntrance.EDID}}
        @projectId={{this.router.currentRoute.attributes.projectId}}
        @modelName={{"entrance"}}
      />
      {{#unless this.buildingEntrance.isNew}}
        <Field @attr="EDID" type="number" readonly disabled />
      {{/unless}}
      <Field
        @attr="locality.name.nameLong"
        required
        readonly={{not this.buildingEntrance.isNew}}
        disabled={{not this.buildingEntrance.isNew}}
      />
      {{#unless this.buildingEntrance.isNew}}
        <Field
          @attr="locality.swissZipCode"
          type="number"
          readonly={{not this.buildingEntrance.isNew}}
          disabled={{not this.buildingEntrance.isNew}}
        />
      {{/unless}}

      <Field @attr="buildingEntranceNo" />
      <Field @attr="isOfficialAddress" @inputType="checkbox" />

      {{!--
      This is not wokrking for some reason. Not sure if this is even needed on the entrance.

      <h2>{{t "ember-gwr.buildingEntrance.coordinates"}}</h2>
      <Field
        @attr="coordinates.north"
        type="number"
        step="0.001"
        @required={{true}}
        min="1070000.0"
        max="1300000.999"
      />
      <Field
        @attr="coordinates.east"
        type="number"
        step="0.001"
        min="2480000.0"
        max="2840000.999"
        @required={{true}}
      />
      <Field
        @attr="coordinates.originOfCoordinates"
        @inputType="select"
        @convertValueTo="number"
        @options={{this.Models.Coordinates.originOfCoordinatesOptions}}
        @required={{true}}
      />
      --}}

      <div class="uk-flex uk-flex-between">
        <h2>{{t "ember-gwr.buildingEntrance.street"}}</h2>
        <span>
          <LinkTo
            class="uk-button
              {{if
                this.buildingEntrance.isNew
                "uk-button-primary"
                "uk-button-default"
              }}"
            @route="building.edit.entrance.edit.link-street"
            @models={{if this.buildingEntrance.isNew (array "new") (array)}}
          >
            {{t
              (if
                this.buildingEntrance.isNew
                "ember-gwr.buildingEntrance.linkStreet.link"
                "ember-gwr.buildingEntrance.linkStreet.change"
              )
            }}
          </LinkTo>
        </span>
      </div>
      {{#unless this.buildingEntrance.street.isNew}}
        <Field @attr="street.ESID" disabled readonly />
        <Field @attr="street.description.descriptionLong" disabled readonly />
        <Field
          @attr="street.streetKind"
          @inputType="select"
          @options={{this.Models.Street.streetKindOptions}}
          @convertValueTo="number"
          disabled
          readonly
        />
        <Field
          @attr="street.officialStreetNumber"
          type="number"
          disabled
          readonly
        />
        <Field
          @attr="street.isOfficialDescription"
          @inputType="checkbox"
          disabled
          readonly
        />
      {{/unless}}

    </ProjectForm>
  {{/if}}
</div>
